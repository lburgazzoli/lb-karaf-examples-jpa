
// *****************************************************************************
//
// *****************************************************************************

subprojects {

    apply plugin: 'java'
    apply plugin: 'osgi'
    apply plugin: 'maven'

    version  = '1.0.0.SNAPSHOT'
    group    = 'com.github.lburgazzoli'

    ext.prefix   = 'karaf-examples'

    repositories {
        maven { url 'http://repo1.maven.org/maven2' }
        maven { url 'http://repo2.maven.org/maven2' }
        maven { url 'http://repo.springsource.org/release' }
        maven { url 'http://repository.springsource.com/maven/bundles/release' }
        maven { url 'http://repository.springsource.com/maven/bundles/external' }
        maven { url 'http://download.eclipse.org/rt/eclipselink/maven.repo' }
        maven { url 'http://repository.jboss.org/nexus/content/repositories/releases' }
        maven { url 'http://repository.jboss.org/nexus/content/groups/public/' }
        maven { url 'http://snapshots.jboss.org/maven2/' }
        maven { url 'http://download.oracle.com/maven' }
        maven { url 'https://oss.sonatype.org/content/repositories/releases' }
        maven { url 'http://kundera.googlecode.com/svn/maven2/maven-missing-resources' }

        mavenLocal()
    }

    dependencies {
        compile 'org.apache.felix:org.apache.felix.configadmin:1.6.0'
        compile 'org.apache.karaf.shell:org.apache.karaf.shell.console:2.3.2'

        compile 'org.apache.commons:commons-lang3:3.1'
        compile 'commons-beanutils:commons-beanutils:1.8.3'
        compile 'org.slf4j:slf4j-api:1.7.2'
        compile 'org.slf4j:slf4j-simple:1.7.2'
        compile 'org.osgi:core:4.3.0'
        compile 'org.osgi:org.osgi.compendium:4.3.0'
        compile 'com.google.guava:guava:14.0.1'
        compile 'org.apache.geronimo.specs:geronimo-jpa_2.0_spec:1.1'
        compile 'org.apache.geronimo.specs:geronimo-jms_1.1_spec:1.1.1'
        compile 'org.apache.geronimo.specs:geronimo-jta_1.1_spec:1.1.1'
        compile 'org.apache.geronimo.specs:geronimo-j2ee-management_1.1_spec:1.0.1'
        compile 'com.hazelcast:hazelcast-all:2.6'
        compile 'com.googlecode.json-simple:json-simple:1.1.1'
        compile 'org.mongodb:mongo-java-driver:2.11.1'
        compile 'com.esotericsoftware.kryo:kryo:2.21'
        compile 'com.fasterxml.jackson.core:jackson-core:2.2.1'
        compile 'com.fasterxml.jackson.core:jackson-databind:2.2.1'
        compile 'com.fasterxml.jackson.core:jackson-annotations:2.2.1'
        compile 'de.undercouch:bson4jackson:2.2.0'
    }

    //[compileJava, compileTestJava]*.options*.compilerArgs = [
    //    "-Xlint:unchecked"
    //]

    jar {
        baseName = "${project.prefix}-${project.name}"

        manifest.attributes['Bundle-Description'     ] = "${project.prefix} :: ${project.name}"
        manifest.attributes['Bundle-Name'            ] = "${project.prefix} :: ${project.name}"
        manifest.attributes['Bundle-SymbolicName'    ] = "${project.prefix}-${project.name}"
        manifest.attributes['Bundle-Version'         ] = project.version
        manifest.attributes['Implementation-Title'   ] = "${project.prefix}-${project.name}-${project.version}"
        manifest.attributes['Implementation-Version' ] = project.version
        manifest.attributes['Implementation-Vendor'  ] = 'lb'

        manifest.classesDir = new File("$buildDir/classes/main")
        manifest.classpath  = project.runtimeClasspath
    }
}

// *****************************************************************************
//
// *****************************************************************************

task wrapper(type: Wrapper) {
    gradleVersion = '1.6'
}

